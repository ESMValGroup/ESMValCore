<!-- Filter -->
<div class="container div_filter">
  <h3>Filter</h3>
  <div class="row row-cols-auto">
    {% for filter_name, filter_values in filters.items() %}
    {% set filter_loop = loop %}
    <div class="col col-lg-3 filter_category" id="filter_{{ filter_name|replace(' ', '_') }}">
        <h4>{{ filter_name|replace('_', ' ')|title }}</h4>
        {% for value in filter_values %}
        <div class="form-check">
          <input class="form-check-input filter_cb" type="checkbox" value="" id="cb_{{ filter_loop.index }}_{{ loop.index }}" rel="f_{{ filter_name|replace(' ', '_') }}_{{ value|replace(' ', '_') }}">
          <label class="form-check-label" for="cb_{{ filter_loop.index }}_{{ loop.index }}">
            {{ value|replace('_', ' ')|title }}
          </label>
        </div>
        {% endfor %}
    </div>
    {% endfor %}
  </div>
  <button class="btn btn-primary" id="b_deleteFilters" disabled>Delete Filters</button>

  <div class="form-check form-switch">
    <input class="form-check-input" type="checkbox" value="" id="cb_hideEmptyDiagnostics" rel="" checked>
    <label class="form-check-label" for="cb_hideEmptyDiagnostics">
      Hide empty diagnostics
    </label>
  </div>
</div>

<!-- Tab links -->
<ul class="nav nav-tabs sticky-top bg-light" id="tabDiagnostics" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active diagnostics-tab" id="tabAll" data-bs-toggle="tab" data-bs-target="#" type="button" role="tab" aria-controls="" aria-selected="true">All</button>
  </li>
  {% for diagnostic in diagnostics %}
    <li class="nav-item" role="presentation">
      <button class="nav-link diagnostics-tab" id="tab_{{ loop.index }}" data-bs-toggle="tab" data-bs-target="#tabPane_{{ loop.index }}" type="button" role="tab" aria-controls="tabPane_{{ loop.index }}" aria-selected="true">{{ diagnostic.title }}</button>
    </li>
  {% endfor %}
</ul>

<div class="tab-content" id="tabContentDiagnostics">
{% for diagnostic in diagnostics %}

  <div id="tabPane_{{ loop.index }}" class="tab-pane show active diagnostics-tab-pane" role="tabpanel" aria-labelledby="tab_{{ loop.index }}">
    <h2>{{ diagnostic.title }}</h2>
    <p>{{ diagnostic.description }}</p>

    {% set diagnostic_loop = loop %}
    {% for task in diagnostic.task_output %}

      {% include 'TaskOutput.j2' %}

    {% endfor %}
  </div>

{% endfor %}
</div>
